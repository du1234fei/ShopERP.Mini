
<script type="text/html" template lay-done="layui.data.done(d);">
    <div class="layui-form coreshop-form layui-form-pane" lay-filter="LAY-app-CoreCmsUser-forgetPasswordForm" id="LAY-app-CoreCmsUser-forgetPasswordForm">

        <div class="layui-form-item">
            <label for="userName" class="layui-form-label">用户工号</label>
            <div class="layui-input-block">
                <input name="userName" id="userName" lay-verType="tips" lay-verify="required|verifyuserName" class="layui-input" lay-reqText="请输入工号" placeholder="请输入工号" />
            </div>
        </div>

        <div class="layui-form-item">
            <label for="phone" class="layui-form-label">手机号</label>
            <div class="layui-input-block">
                <input name="phone" id="phone" lay-verType="tips" lay-verify="required|verifymobile" class="layui-input" lay-reqText="请输入手机号" placeholder="请输入手机号" />
            </div>
        </div>

        <div class="layui-form-item">
            <label for="userName" class="layui-form-label" style="flex-shrink: 0;">邮箱</label>
            <div class="layui-input-inline" style="width: auto; display: flex; align-items: center; gap: 10px">
                <input name="email" id="email" lay-verType="tips" lay-verify="required|verifyemail" class="layui-input" style="flex:1" lay-reqText="请输入邮箱" placeholder="请输入邮箱" />

                &nbsp;
                <input type="button" class="layui-btn" id="btnSendValidCode" style="flex-shrink:0" value="发送验证码">
            </div>
        </div>

        <div class="layui-form-item">
            <label for="validCode" class="layui-form-label">验证码</label>
            <div class="layui-input-block">
                <input name="validCode" id="validCode" lay-verType="tips" lay-verify="required|verifyalidCode" class="layui-input" lay-reqText="请输入验证码" placeholder="请输入验证码" />
            </div>
        </div>

        <div class="layui-form-item">
            <label for="passWord" class="layui-form-label">新密码</label>
            <div class="layui-input-block">
                <input name="passWord" type="password" id="passWord" lay-verType="tips" lay-verify="required|verifypassWord" class="layui-input" lay-reqText="请输入密码" placeholder="请输入密码" />
            </div>
        </div>

        <div class="layui-form-item">
            <label for="passWord" class="layui-form-label">确认密码</label>
            <div class="layui-input-block">
                <input name="repassword" type="password" id="repassword" lay-verType="tips" lay-verify="required|verifypassWord" class="layui-input" lay-reqText="请再次输入密码" placeholder="请再次输入密码" />
            </div>
        </div>

        <div class="layui-form-item core-hidden">
            <label class="layui-form-label"></label>
            <input type="button" class="layui-btn" lay-submit lay-filter="LAY-app-CoreCmsUser-forgetPasswordForm-submit" id="LAY-app-CoreCmsUser-forgetPasswordForm-submit" value="确认提交">
        </div>

    </div>
</script>
<script>
    layui.data.done = function (d) {
        console.log(d);
        layui.use(['admin', 'form', 'laydate', 'upload', 'coreHelper'],
            function () {
                var $ = layui.$
                    , form = layui.form
                    , admin = layui.admin
                    , laydate = layui.laydate
                    , upload = layui.upload
                    , coreHelper = layui.coreHelper;

                laydate.render({
                    elem: '#createTime-birthday',
                });

                form.verify({
                    verifyuserName: [/^[\S]{0,20}$/, '用户名最大只允许输入20位字符，且不能出现空格'],
                    verifypassWord: [/^[\S]{0,50}$/, '密码最大只允许输入50位字符，且不能出现空格'],
                    verifymobile: [/^[\S]{0,15}$/, '手机号最大只允许输入15位字符，且不能出现空格'],
                    verifynickName: [/^[\S]{0,50}$/, '昵称最大只允许输入50位字符，且不能出现空格'],
                    verifyemail: [/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/, '请输入正确的邮箱格式'],
                    verifyalidCode: [/^[\S]{0,15}$/, '验证码最大只允许输入15位字符，且不能出现空格']
                });

                //重载form
                form.render(null, 'LAY-app-CoreCmsUser-forgetPasswordForm');

                $('#btnSendValidCode').on('click', function () {

                    //用户工号
                    var userName = $("#userName").val();

                    //发送验证码功能
                    var userEmail = $("#email").val();

                    // 如果没有错误，则验证通过
                    var errorUserName = form.validate($("#userName"));
                    var errorEmail = form.validate($("#email"));
                    if (error || errorEmail) {
                        return; // 验证不通过，自动显示错误信息
                    }

                    if (userName == "" || userEmail == "")
                    {
                        layer.msg("-用户工号,用户邮箱 都不能为空！");
                        return;
                    }

                    layer.msg("-用户工号：" + userName + ",用户邮箱：" + userEmail);

                });




            })
    };
</script>